<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Git Flow 用法总结 | 梁飞</title>
  <meta name="author" content="liangfei">
  
  <meta name="description" content="梁飞的个人博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Git Flow 用法总结"/>
  <meta property="og:site_name" content="梁飞"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="梁飞" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">梁飞</a></h1>
  <h2><a href="/">行有不得反求诸己</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
    <li><a href="https://github.com/lyndonchin">Github</a></li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-08-03T16:00:00.000Z"><a href="/2015/08/04/introduction-to-git-flow/">2015-08-04</a></time>
      
      
  
    <h1 class="title">Git Flow 用法总结</h1>
  

    </header>
    <div class="entry">
      
        <p>Git Flow 是 Git 一个扩展，基于 Vincent Driessen 提出的 <a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="external">A successful Git branching model</a>。</p>
<p><strong>注意</strong></p>
<ul>
<li>Git Flow 基于 <code>merge</code> 而不是 <code>rebase</code>，基于 <code>merge</code> 的优势在于可以很快定位到出问题的 <code>commit</code>，便于快速回滚。</li>
<li>git merge –no-ff 可以保证即使是 fast-forward 也会产生一个 merge commit。</li>
</ul>
<p><img src="http://nvie.com/img/git-model@2x.png" alt=""></p>
<p>基于以下五类 branch 进行项目管理。</p>
<ol>
<li>master - 每一个 commit 都是一个可发布的版本</li>
<li>develop - 开发分支</li>
<li>release - 发布分支，fork 自 develop 分支</li>
<li>feature - 新功能分支，fork 自 develop 分支</li>
<li>hotfix - 线上紧急修复</li>
</ol>
<p>以上五种 branch 基本可以覆盖我们开发中常见的活动。</p>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><h3 id="master"><a href="#master" class="headerlink" title="master"></a>master</h3><p>master 是主分支，必须保证它的每一个 commit 都是可以发布的，每一个正式发布的版本都要打上 tag。</p>
<p>release- 分支以及 hotfix- 分支都要 merge 到此分支。</p>
<h3 id="develop"><a href="#develop" class="headerlink" title="develop"></a>develop</h3><p>develop 是开发分支，当需要新功能开发时，首先从 develop 分支 fork 出一个 feature- 分支，开发完成后再 merge 回 develop 分支。</p>
<p>feature- 分支可以是实验性的功能，也可能是一个下一个版本需要的功能。</p>
<h3 id="release"><a href="#release" class="headerlink" title="release"></a>release</h3><p>realse 分支是临近发布时从 develop 分支拉取的分支，这样可以保证当前的发布版本不会影响到下一个版本的新功能开发。</p>
<pre>
          |develop
          |
          *
          |\
          | \
         /*  |relase
        / |  |
feature|  |  |
       |  |  |
       |  |  |
</pre>

<p>release 分支创建以后，还可以继续在 develop 上进行新功能开发，但是 release 分支只允许小的 bug fix，不能有大功能改动。</p>
<p>最后 release 分支还是要 merge 回 master 和 feature 分支。</p>
<h3 id="feature"><a href="#feature" class="headerlink" title="feature"></a>feature</h3><p>feature 负责新功能开发，开发完毕后需要 merge 回 develop 分支。</p>
<h3 id="hotfix"><a href="#hotfix" class="headerlink" title="hotfix"></a>hotfix</h3><p>hotfix 的主要用于线上 bug 的紧急修复，fork 自 master 分支，修复完毕后需要 merge 回 master 分支和 develop 分支。</p>
<p>如果此时 release 分支还存在，hotfix 需要 merge 到 release 分支而不是 develop 分支，因为 release 分支最终会被 merge 到 develop 分支上。</p>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="创建-feature-分支"><a href="#创建-feature-分支" class="headerlink" title="创建 feature 分支"></a>创建 feature 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b myfeature develop</div></pre></td></tr></table></figure>
<h3 id="完成-feature-分支"><a href="#完成-feature-分支" class="headerlink" title="完成 feature 分支"></a>完成 feature 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git checkout develop</div><div class="line">$ git merge --no-ff myfeature</div><div class="line">$ git branch <span class="_">-d</span> myfeature</div><div class="line">$ git push origin develop</div></pre></td></tr></table></figure>
<h3 id="创建-release-分支"><a href="#创建-release-分支" class="headerlink" title="创建 release 分支"></a>创建 release 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b relese-1.2 develop</div><div class="line">$ ./bump-version.sh 1.2</div><div class="line">$ git commit <span class="_">-a</span> -m <span class="string">"Bumped version number to 1.2"</span></div></pre></td></tr></table></figure>
<h3 id="完成-release-分支"><a href="#完成-release-分支" class="headerlink" title="完成 release 分支"></a>完成 release 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ git checkout master</div><div class="line">$ git merge --no-ff release-1.2</div><div class="line">$ git tag <span class="_">-a</span> 1.2</div><div class="line">$ git checkout develop</div><div class="line">$ git merge --no-ff release-1.2</div><div class="line">$ git branch <span class="_">-d</span> release-1.2</div></pre></td></tr></table></figure>
<h3 id="创建-hotfix-分支"><a href="#创建-hotfix-分支" class="headerlink" title="创建 hotfix 分支"></a>创建 hotfix 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b hotfix-1.2.1 master</div><div class="line">$ ./bump-version.sh 1.2.1</div><div class="line">$ git commit <span class="_">-a</span> -m <span class="string">"Bumped version number to 1.2.1"</span></div><div class="line">$ git commit -m<span class="string">"Fixed savere production problem"</span></div></pre></td></tr></table></figure>
<h3 id="完成-hotfix-分支"><a href="#完成-hotfix-分支" class="headerlink" title="完成 hotfix 分支"></a>完成 hotfix 分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ git checkout master</div><div class="line">$ git merge --no-ff hotfix-1.2.1</div><div class="line">$ git tag <span class="_">-a</span> 1.2.1</div><div class="line">$ git checkout develop</div><div class="line">$ git merge --no-ff hotfix-1.2.1</div><div class="line">$ git branch <span class="_">-d</span> hotfix-1.2.1</div></pre></td></tr></table></figure>
<h2 id="Git-Flow-命令"><a href="#Git-Flow-命令" class="headerlink" title="Git Flow 命令"></a>Git Flow 命令</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git flow init</div></pre></td></tr></table></figure>
<h3 id="feature-1"><a href="#feature-1" class="headerlink" title="feature"></a>feature</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git flow feature start &lt;name&gt;</div><div class="line">$ git flow feature finish &lt;name&gt;</div></pre></td></tr></table></figure>
<h3 id="release-1"><a href="#release-1" class="headerlink" title="release"></a>release</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git flow release start &lt;release&gt; [&lt;base&gt;]</div><div class="line">$ git flow release finish &lt;release&gt;</div></pre></td></tr></table></figure>
<h3 id="hotfix-1"><a href="#hotfix-1" class="headerlink" title="hotfix"></a>hotfix</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git flow hotfix start &lt;release&gt; [&lt;base&gt;]</div><div class="line">$ git flow hotfix finish &lt;release&gt;</div></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/danielkummer/git-flow-cheatsheet" target="_blank" rel="external">git-flow-cheatsheet</a></li>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="external">A successful Git branching model</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/Git/">Git</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div id="uyan_frame"></div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2128686"></script>
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:liangfei.me">
  </form>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/Hybrid/" style="font-size: 10px;">Hybrid</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Retrofit/" style="font-size: 12.5px;">Retrofit</a> <a href="/tags/RxJava/" style="font-size: 10px;">RxJava</a> <a href="/tags/Web/" style="font-size: 12.5px;">Web</a> <a href="/tags/dart/" style="font-size: 10px;">dart</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/个人总结/" style="font-size: 17.5px;">个人总结</a> <a href="/tags/产品设计/" style="font-size: 10px;">产品设计</a> <a href="/tags/单元测试/" style="font-size: 10px;">单元测试</a> <a href="/tags/汽车/" style="font-size: 10px;">汽车</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/移动开发/" style="font-size: 10px;">移动开发</a>
  </div>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2017/07/06/improve-quanlity-with-mockito/">Mockito 用法和原理</a>
      </li>
    
      <li>
        <a href="/2017/07/04/2017-semi-annual-summary/">2017 年中总结</a>
      </li>
    
      <li>
        <a href="/2017/03/21/app-force-update-architecture/">Android 强升逻辑和实现</a>
      </li>
    
      <li>
        <a href="/2017/02/15/2016-summary/">2016 年终总结</a>
      </li>
    
      <li>
        <a href="/2017/02/04/thinking-in-mobile/">关于 App 开发的一些思考</a>
      </li>
    
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 liangfei
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'liangfeizc';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>